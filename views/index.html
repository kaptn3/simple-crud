<html>

<head>
  <link rel="stylesheet" href="/css/style.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Airplanes database</title>
</head>

<body>
  <div class="app" v-cloak>
    <div class="container">
      <h1>Airplanes</h1>
      <div class="tables">
        <table v-for="(value, number) in data" :class="{ editing: value._id == editedUser }">
          <tr>
            <th>Name</th>
            <th>Value</th>
          </tr>

          <tr v-for="(item, index) in value" v-if="(index !== '_id' && index !== '__v')">
            <td>{{ index }}</td>
            <td>
              <div class="view">
                {{ item }}
              </div>
              <div class="edit">
                <input v-if="index === 'serialNumber' || index === 'regNumber'" type="number" v-model="value[index]">
                <input v-else-if="index === 'date'" type="date" v-model="value[index]">
                <input v-else type="text" v-model="value[index]">
              </div>
            </td>
          </tr>
          <tr>
            <td class="table-button">
              <input type="text" name="_id" :value="value._id" hidden>
              <button class="view" @click="editData(value._id)">Edit</button>
              <button @click="saveData(number)" class="edit">Save</button>
            </td>
            <td class="table-button"><button @click="deleteData(value._id)">Delete</button></td>
          </tr>
        </table>
      </div>

      <div class="links-group">
        <a class="link" @click="openModal">Add new</a>
        <a class="link" target="_blank" href="/api">API</a>
      </div>

    </div>
    <div v-if="isOpenModal" class="modal">
      <div class="modal-wrapper">
        <h1 class="add-new__title">Add new airplane</h1>
        <div v-for="(item, index) in form" class="modal-wrapper__input">
          <input v-if="index === 'serialNumber' || index === 'regNumber'" type="number" v-model="form[index]" name="index" :placeholder="index">
          <input v-else-if="index === 'date'" type="date" v-model="form[index]" name="index" :placeholder="index">
          <input v-else type="text" v-model="form[index]" name="index" :placeholder="index">
        </div>
        
        <h3 v-if="newForm.length">New fields</h3>
        <div v-for="(input, index) in newForm" class="add-new__field">
          <input type="text" v-model="input.one">
          <input type="text" v-model="input.two">
          <button class="add-new__delete" @click="deleteNewField(index)">Delete</button>
        </div>
        <button @click="addNewField">Add new field</button>
        <button @click="sendData">Submit</button>
      </div>
      <a class="close" @click="closeModal">Close</a>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="/main.js"></script>
</body>

</html>